@import url("https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800&display=swap");

/* =======================
   VARIABLES Y TEMAS
   ======================= */
:root {
  --color-primary: #7380ec;
  --color-danger: #ff7782;
  --color-success: #41f1b6;
  --color-warning: #ffbb55;
  --color-white: #fff;
  --color-info: #7d8da1;
  --color-dark: #363949;
  --color-light: rgba(132, 139, 200, 0.18);
  --color-dark-varient: #677483;
  --color-background: #f6f6f9;
  --card-border-radius: 2rem;
  --border-radius-1: 0.4rem;
  --border-radius-2: 1.2rem;
  --card-padding: 1.8rem;
  --box-shadow: 0 2rem 3rem var(--color-light);
}

.dark-theme {
  --color-background: #181a1e;
  --color-white: #202528;
  --color-dark: #edeffd;
  --color-dark-varient: #a3bdcc;
  --color-light: rgba(0, 0, 0, 0.4);
  --box-shadow: 0 2rem 3rem var(--color-light);
}

/* =======================
   RESET Y TIPOGRAFÍA
   ======================= */
* {
  margin: 0;
  padding: 0;
  text-decoration: none;
  list-style: none;
  box-sizing: border-box;
  color: var(--color-dark);
}

html {
  font-size: 14px;
  scroll-behavior: smooth;
}

body {
  font-family: "Poppins", sans-serif;
  font-size: 0.88rem;
  background: var(--color-background) !important;
  user-select: none;
  overflow-x: hidden;
  color: var(--color-dark);
  margin: 0;
  padding: 0;
}

img {
  display: block;
  width: 100%;
}

h1, h2, h3, h4, h5, small { color: var(--color-dark); }

h1 { 
  font-weight: 800;
  font-size: 1.8rem; 
}
h2 { font-size: 1.4rem; }
h3 { font-size: 0.87rem; }
h4 { font-size: 0.8rem; }
h5 { font-size: 0.77rem; }
small { font-size: 0.75rem; }

.text-muted { color: var(--color-info); }
p { color: var(--color-dark-varient); }
b { color: var(--color-dark); }

.primary { color: var(--color-primary); }
.danger { color: var(--color-danger); }
.success { color: var(--color-success); }
.warning { color: var(--color-warning); }

/* =======================
   LAYOUT GENERAL
   ======================= */
.container {
  position: relative;
  display: grid;
  width: 93%;
  margin: 0 3rem;
  gap: 1.8rem;
  grid-template-columns: 14rem auto 23rem;
  padding-top: 4rem;
  overflow: initial !important;
}

/* =======================
   HEADER
   ======================= */
header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  z-index: 1000;
  backdrop-filter: blur(3px);
  background-color: color-mix(in srgb, var(--color-background) 70%, transparent);
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  padding: 1rem 2rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  transition: all 0.3s ease;
}
header h3 { font-weight: 500; }
header.scrolled {
  background-color: color-mix(in srgb, var(--color-background) 90%, transparent);
  padding: 0.5rem 2rem;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
}
header.active { box-shadow: var(--box-shadow); }
header .logo {
  display: flex;
  gap: 0.8rem;
  margin-right: auto;
}
header .logo img {
  width: 11rem;
  height: 5rem;
}
header,
header .navbar {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding: 0 3rem;
  color: var(--color-info);
}
header .navbar a {
  display: flex;
  margin-left: 2rem;
  gap: 1rem;
  align-items: center;
  justify-content: space-between;
  position: relative;
  height: 3.7rem;
  transition: all 300ms ease;
  padding: 0 2rem;
}
header .navbar a:hover { padding-top: 1.5rem; }
header .navbar a.active {
  background: var(--color-light);
  color: var(--color-primary);
}
header .navbar a.active::before {
  content: "";
  background-color: var(--color-primary);
  position: absolute;
  height: 5px;
  width: 100%;
  left: 0;
  top: 0;
}
header #profile-btn {
  display: none;
  font-size: 2rem;
  margin: 0.5rem 2rem 0 0;
  cursor: pointer;
}
header .theme-toggler {
  background: var(--color-light);
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 1.6rem;
  width: 4.2rem;
  cursor: pointer;
  border-radius: var(--border-radius-1);
  margin-right: 2rem;
}
header .theme-toggler span {
  font-size: 1.2rem;
  width: 50%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}
header .theme-toggler span.active {
  background-color: var(--color-primary);
  color: white;
  border-radius: var(--border-radius-1);
}

/* =======================
   MAIN - HOME SECTION
   ======================= */
main {
  position: relative;
  margin-top: 1.4rem;
}
main .subjects {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 1.6rem;
}
main .subjects > div,
main .zarazap > div {
  background-color: var(--color-white);
  padding: var(--card-padding);
  border-radius: var(--card-border-radius);
  margin-top: 1rem;
  box-shadow: var(--box-shadow);
  transition: all 300ms ease;
  cursor: pointer;
}

main .zarazap > div {
  display: flex;
  padding: 4px 10px 10px 10px;
  margin: 0;
}

main .subjects > div:hover,
main .zarazap > div:hover,
.right .announcements .updates:hover,
.right .leaves-tc .teacher:hover,
.card-estado-nodo:hover,
main .grafico:hover,
main .grafico2:hover {
  box-shadow: none;
}
main .subjects > div span,
main .zarazap > div span {
  background-color: var(--color-primary);
  padding: 0.5rem;
  border-radius: 50%;
  color: var(--color-white);
  font-size: 1.5rem;
}

main .zarazap > div span {margin-top: 7px;}

main .subjects > div.mth span,
main .subjects > div.cg span { background: var(--color-danger); }
main .subjects > div.cs span { background: var(--color-success); }
main .subjects > div.qw span { background: #ecea73; }
div.cs span { background: var(--color-success); }

main .subjects h3,
main .zarazap h3 {
  margin: 1rem 0 0.6rem;
  font-size: 1rem;
}
main .zarazap h3 { padding-left: 10px; }

main .subjects .progress,
main .zarazap .progress {
  position: relative;
  width: 89px;
  height: 89px;
  border-radius: 50%;
  margin: auto;
}
main .subjects .progress .number,
main .zarazap .progress .number {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
}
main .subjects small,
main .zarazap small {
  margin-top: 1rem;
  display: block;
}
main .subjects svg circle,
main .zarazap svg circle {
  fill: none;
  stroke: var(--color-primary);
  stroke-width: 8;
  stroke-linecap: round;
  transform: translate(5px, 5px);
  stroke-dasharray: 110;
  stroke-dashoffset: 92;
}
main .subjects .eg svg circle { stroke-dashoffset: 25; stroke-dasharray: 210; }
main .subjects .mth svg circle { stroke-dashoffset: 7; stroke-dasharray: 210; }
main .subjects .cs svg circle  { stroke-dashoffset: 35; stroke-dasharray: 210; }
main .subjects .cg svg circle  { stroke-dashoffset: 0;  stroke-dasharray: 210; }
main .subjects .net svg circle { stroke-dashoffset: 5;  stroke-dasharray: 210; }
div.cs { stroke-dashoffset: 35; stroke-dasharray: 210; }

main .grafico,
main .grafico2,
main .grafico3 {
  background-color: var(--color-white);
  padding: var(--card-padding);
  border-radius: var(--card-border-radius);
  margin-top: 1rem;
  box-shadow: var(--box-shadow);
  transition: all 300ms ease;
  margin-right: 10px;
  width: 100%;
}
main .grafico { height: 279px; }
main .grafico2 { height: 480px; }
main .grafico3 {
  height: 480px;
  width: 500px;
  margin-left: -25px;
  margin-top: 3rem;
  margin-right: 1px;
}
main .timetable h2 {
  margin-bottom: 0.8rem;
  justify-content: center;
  display: grid;
}
main .timetable {
  margin-top: 2rem;
  padding-left: 44px;
  padding-right: 44px;
  display: flex;
}
main .timetableinicio {
  margin-top: 2rem;
}
main .grafich2 {
  display: flex;
  justify-content: center;
}
main .timetableinicio h2 { margin-bottom: 0.8rem; }
main .timetableinicio table {
  background-color: var(--color-white);
  width: 100%;
  border-radius: var(--card-border-radius);
  padding: var(--card-padding);
  text-align: center;
  box-shadow: var(--box-shadow);
  transition: all 300ms ease;
}
main .timetableinicio span { display: none; }
main .timetableinicio table:hover { box-shadow: none; }
main table tbody td {
  height: 2.8rem;
  border-bottom: 1px solid var(--color-light);
  color: var(--color-dark-varient);
}
main table tbody tr:last-child td { border: none; }
main .timetableinicio.active {
  width: 100%;
  height: 100vh;
  position: fixed;
  top: 0;
  left: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
main .timetableinicio.active h2 { color: var(--color-dark); }
main .timetableinicio.active table {
  width: 90%;
  max-width: 1000px;
  position: relative;
}
main .timetableinicio.active span {
  display: block;
  font-size: 2rem;
  color: var(--color-dark);
  cursor: pointer;
}
.timetableinicio div {
  position: relative;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
main .timetable.active .closeBtn {
  position: absolute;
  top: 5%;
  right: 5%;
}

/* =======================
   ZARAZAP Y DROPDOWN
   ======================= */
.zarazap {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: center;
  gap: 10px;
  width: 100%;
}
.dropdown, .location_button {
  border-radius: 5px;
  border: none;
  box-shadow: var(--box-shadow);
  transition: box-shadow 0.3s;
}
.dropdown { 
  flex: 1; 
  max-width: 70%; 
  background: white;
}
.location_button {
  flex-shrink: 0;
  padding: 5px 10px;
  width: auto;
  margin-left: 10px;
  display: grid;
  background: var(--color-white);
}
.location_button:hover, .dropdown:hover {
  box-shadow: none;
  cursor: pointer;
}
select {
  background-color: #333;
  color: black;
  border: 1px solid #666;
  padding: 5px;
  border-radius: 5px;
}
select option {
  background-color: #444;
  color: #fff;
}
select option:hover { background-color: #555; }

/* =======================
   MAPA Y SWEETALERT
   ======================= */
#map { width: 100%; height: 300px; }
#swal2-title { color: var(--color-black) !important; }
div:where(.swal2-container).swal2-center>.swal2-popup {
  grid-column: 2;
  grid-row: 2;
  place-self: center center;
  background-color: var(--color-background);
}
.leaflet-popup-content {
  margin: 13px 24px 13px 20px;
  line-height: 1.3;
  font-size: 1.08333em;
  min-height: 1px;
  color: black !important;
}

/* =======================
   OVERLAY Y ZOOMABLE
   ======================= */
.zoomable {
  width: 150px;
  cursor: pointer;
  transition: transform 0.2s;
}
.overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  justify-content: center;
  align-items: center;
  z-index: 1000;
}
.overlay-img {
  max-width: 90%;
  max-height: 90%;
}
.overlay.active { display: flex; }

/* =======================
   FOOTER
   ======================= */
footer {
  color: var(--color-dark-varient);
  text-align: center;
  font-size: 0.8rem;
  padding: 10px 5px;
  display: flex;
  align-content: center;
  align-items: center;
  justify-content: center;
}

/* =======================
   CARD ESTADO NODO
   ======================= */
.card-estado-nodo {
  background-color: var(--color-white);
  padding: 1rem 1.5rem;
  border-radius: var(--card-border-radius);
  box-shadow: var(--box-shadow);
  transition: all 300ms ease;
  display: flex;
  align-items: center;
  gap: 0.8rem;
  font-size: 1rem;
  font-weight: 500;
  color: var(--color-dark);
  width: fit-content;
  max-width: 320px;
  margin: 1.5rem auto 0 auto;
  border-left: 6px solid transparent;
}
.card-estado-nodo i { font-size: 1.3rem; }

/* =======================
   TIMELINE (TL)
   ======================= */
.tl-timeline,
.tl-slide,
.tl-text,
.tl-timenav,
.tl-timemarker-content-container {
  background-color: var(--color-background) !important;
}
.tl-text,
.tl-timemarker-content-container,
h2.tl-headline,
h3.tl-headline-date {
  color: var(--color-text) !important;
}
.tl-timeaxis-tick:before { background-color: var(--color-acento) !important; }
.tl-timeaxis-background {
  height: 39px;
  width: 100%;
  position: absolute;
  bottom: 0;
  left: 0;
  background-color: var(--color-background);
  border-top: 1px solid #e5e5e5;
  z-index: 2;
}
.tl-timeline .tl-attribution {
  cursor: pointer;
  z-index: 9;
  position: absolute;
  bottom: 2px;
  left: 0px;
  font-size: 10px;
  line-height: 10px;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif !important;
  background-color: rgba(255, 255, 255, 0.85);
  padding: 3px;
  display: none;
}
.tl-menubar {
  position: absolute;
  z-index: 11;
  text-align: center;
  color: #333;
  overflow: hidden;
  border-bottom-right-radius: 10px;
  border-top-right-radius: 10px;
  top: 100%;
  left: 0;
  display: none;
}
.tl-slidenav-icon { color: var(--color-black) !important; }
.tl-slidenav-title { color: var(--color-dark) !important; }

/* =======================
   LOADER
   ======================= */
#loader {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: white;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  transition: opacity 0.5s ease;
}
.spinner {
  width: 50px;
  height: 50px;
  border: 5px solid #ccc;
  border-top: 5px solid #0078d7;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
#content {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.8s ease, transform 0.8s ease;
}
body.loaded #loader {
  opacity: 0;
  pointer-events: none;
}
body.loaded #content {
  opacity: 1;
  transform: translateY(0);
}

/* =======================
   MEDIA QUERIES
   ======================= */
@media screen and (max-width: 1200px) {
  html { font-size: 12px; }
  .container { grid-template-columns: 13rem auto 20rem; padding-top: 4rem; }
  header { position: fixed; }
  header .logo h2, header .navbar h3 { display: none; }
  header .navbar a { width: 4.5rem; padding: 0 1rem; }
  main .subjects { grid-template-columns: repeat(2, 1fr); gap: 1; display: block; }
  main .timetable { width: 150%; position: absolute; padding: 4rem 0 0 0; }
  main .subjects { grid-template-columns: repeat(2, 1fr); gap: 1; display: block; }
}

@media screen and (max-width: 768px) {
  html { font-size: 10px; }
  .container { width: 100%; grid-template-columns: 1fr; margin: 0; }
  header { padding: 0 0.8rem; }
  header #profile-btn { display: inline; }
  header .navbar { padding: 0; }
  header .navbar a { margin: 0 0.5rem 0 0; }
  header .theme-toggler { margin: 0; }
  aside {
    position: absolute;
    top: 4rem;
    left: 0;
    right: 0;
    background-color: var(--color-white);
    padding-left: 2rem;
    transform: translateX(-100%);
    z-index: 10;
    width: 18rem;
    height: 100%;
    box-shadow: 1rem 3rem 4rem var(--color-light);
    transition: all 2s ease;
  }
  aside.active { transform: translateX(0); }
  main { padding: 0 2rem; }
  main .timetable { position: relative; margin: 3rem 0 0 0; width: 100%; }
  main .timetable table { width: 100%; margin: 0; min-width: 600px; }
  .right { width: 100%; padding: 2rem; }
  main { padding: 0 1rem; }
  .right { padding: 1rem; }
  main .timetable table { width: 100%; }
  .timetableinicio table th:nth-child(3),
  .timetableinicio table td:nth-child(3),
  .timetableinicio table th:nth-child(4),
  .timetableinicio table td:nth-child(4) {
    display: none;
  }
}

@media screen and (max-width: 480px) {
  .container { grid-template-columns: 1fr; margin: 0; padding: 0; }
  header .navbar a { margin: 0 5px; font-size: 0.75rem; }
  main .subjects { grid-template-columns: 1fr; gap: 1rem; }
  .right { padding: 1rem; }
  footer { font-size: 0.8rem; }
}

/* =======================
   EXTRAS
   ======================= */
.etech2 { margin-top: 20px; }